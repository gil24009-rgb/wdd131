/* ===== CSS: Clean, commented, and rubric-aligned ===== */

/* Base tokens */
:root{
  --bg: #0f172a;          /* slate-900 */
  --panel: #111827;       /* gray-900 (slightly warmer) */
  --card-front: #1f2937;  /* gray-800 */
  --card-back: #0b1224;   /* deep navy */
  --muted: #94a3b8;       /* slate-400 */
  --text: #e5e7eb;        /* gray-200 */
  --accent: #60a5fa;      /* blue-400 */
  --accent-strong: #3b82f6; /* blue-500 */
  --ok: #22c55e;
  --warn: #f59e0b;
  --err: #ef4444;
  --ring: 2px solid #93c5fd; /* focus ring */
  --radius-lg: 20px;
  --radius-sm: 10px;
  --shadow-lg: 0 20px 40px rgba(0,0,0,.35);
  --shadow-md: 0 12px 24px rgba(0,0,0,.25);
}

*,
*::before,
*::after { box-sizing: border-box; }

html, body {
  margin: 0;
  height: 100%;
  background: radial-gradient(1200px 600px at 70% -10%, #1e293b 0%, var(--bg) 60%);
  color: var(--text);
  font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Arial, sans-serif;
}

/* Accessibility helpers */
.skip-link {
  position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden;
}
.skip-link:focus { position: static; width: auto; height: auto; padding: .5rem 1rem; background: var(--accent-strong); color: #fff; border-radius: .5rem; }

.visually-hidden {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden; clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap; border: 0; padding: 0; margin: -1px;
}

/* Header & Footer */
.site-header {
  padding: 2rem 1rem 1rem;
  max-width: 980px;
  margin-inline: auto;
}
.branding .course { color: var(--muted); font-size: .85rem; letter-spacing: .06em; text-transform: uppercase; }
.branding .title { margin: .25rem 0 0; font-weight: 700; letter-spacing: .02em; }
.branding .subtitle { margin: .25rem 0 0; color: var(--muted); }

.breadcrumb {
  margin: .75rem 0 0;
  padding: 0; list-style: none; display: flex; gap: .5rem; color: var(--muted);
}
.breadcrumb a { color: inherit; text-decoration-color: color-mix(in oklab, var(--muted), white 20%); }
.breadcrumb li+li::before { content: "â€º"; margin-right: .5rem; }

.site-footer {
  max-width: 980px;
  margin: 2rem auto;
  padding: 1rem;
  color: var(--muted);
  text-align: center;
}

/* Layout container */
.container {
  max-width: 980px;
  margin: 0 auto;
  padding: 1rem;
}

/* ===== Form: Outer grid that overlaps front/back and places button ===== */
.card-form { margin-top: .5rem; }
.form-grid {
  display: grid;
  grid-template-rows: auto auto;
  grid-template-columns: 1fr;
  gap: 1.25rem;
  position: relative;
}

/* Shared card face styles */
.card {
  border-radius: var(--radius-lg);
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: var(--shadow-lg);
  padding: 1.25rem;
  background: linear-gradient(160deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  backdrop-filter: blur(6px);
}

/* Put both cards in the same grid area to overlap; then offset via transforms */
.card--back,
.card--front {
  grid-row: 1 / 2;
  grid-column: 1 / -1;
}

/* Back behind front */
.card--back {
  background: linear-gradient(160deg, var(--card-back), #050a17 70%);
  z-index: 0;
  transform: translate(28%, 18%) rotate(-3deg);
  transform-origin: center;
  min-height: 240px;
  position: relative;
}
.mag-strip {
  height: 44px;
  background: linear-gradient(90deg, #0f172a, #111827 40%, #0f172a);
  border-radius: var(--radius-sm);
  margin: .5rem 0 1.25rem;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
}

/* Back face inner grid */
.back-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: .75rem;
}
.cvc-field {
  justify-self: end;
  width: min(220px, 60%);
}

/* Front on top */
.card--front {
  background: linear-gradient(160deg, var(--card-front), #0f1a2e 70%);
  z-index: 1;
  transform: translate(-6%, -6%) rotate(2deg);
  min-height: 260px;
}

/* Front face inner grid */
.front-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem 1.25rem;
  align-items: end;
}
.brand { grid-column: 1 / 2; align-self: start; }
.card-image { display: block; height: 55px; width: auto; }

/* Field blocks */
.field label {
  display: inline-block;
  margin-bottom: .35rem;
  font-weight: 600;
  letter-spacing: .01em;
}
.field input {
  width: 100%;
  padding: .75rem .9rem;
  border-radius: .75rem;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(2,6,23,.6);
  color: var(--text);
  outline: none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.field input::placeholder { color: color-mix(in oklab, var(--muted), white 10%); }
.field input:focus-visible { border-color: var(--accent); box-shadow: 0 0 0 4px rgba(59,130,246,.25); }
.help { display: block; margin-top: .4rem; color: var(--muted); font-size: .85rem; }

/* Specific placement on the front grid */
.field.holder { grid-column: 1 / 3; }
.field.number { grid-column: 1 / 3; }
.field.expiry { grid-column: 1 / 2; max-width: 220px; }

/* Validation hints (HTML-driven) */
input:required:user-invalid { border-color: var(--err); }
input:required:user-valid   { border-color: var(--ok); }

/* Actions row (same parent grid, but below overlapped cards) */
.actions {
  grid-row: 2 / 3;
  display: grid;
  justify-items: start;
  gap: .5rem;
  padding-top: 1.25rem;
}
.btn {
  appearance: none;
  border: none;
  border-radius: 999px;
  padding: .9rem 1.25rem;
  font-weight: 700;
  letter-spacing: .02em;
  background: linear-gradient(90deg, var(--accent), var(--accent-strong));
  color: white;
  cursor: pointer;
  box-shadow: var(--shadow-md);
  transition: transform .06s ease, box-shadow .2s ease, filter .2s ease;
}
.btn:hover { filter: brightness(1.05); }
.btn:active { transform: translateY(1px) scale(.995); }
.disclaimer { color: var(--muted); font-size: .9rem; }

/* Responsive adjustments */
@media (max-width: 720px) {
  .card--back { transform: translate(12%, 16%) rotate(-2.5deg); }
  .card--front { transform: translate(-4%, -6%) rotate(1.5deg); }
}
@media (max-width: 520px) {
  .front-grid { grid-template-columns: 1fr; }
  .field.holder,
  .field.number,
  .field.expiry { grid-column: 1 / 2; }
  .cvc-field { width: 100%; }
  .card--back { transform: translate(6%, 12%) rotate(-2deg); }
  .card--front { transform: translate(-2%, -4%) rotate(1deg); }
}

/* Links */
a { color: #bfdbfe; text-decoration: underline; text-underline-offset: 2px; }
a:hover { text-decoration-thickness: 2px; }